<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/steps/login_steps.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/steps/login_steps.py" />
              <option name="originalContent" value="from pytest_bdd import given, when, then, parsers, scenarios&#10;from selenium.webdriver.support.wait import WebDriverWait&#10;from pages.login_page import LoginPage&#10;&#10;@given('el usuario está en la página de login')&#10;def navigate_to_login(selenium, base_url):&#10;    login_page = LoginPage(selenium, base_url)&#10;    login_page.open()&#10;&#10;@when(parsers.parse('ingresa usuario &quot;{username}&quot;'))&#10;def enter_username(selenium, base_url, username):&#10;    login_page = LoginPage(selenium, base_url)&#10;    login_page.enter_username(username)&#10;&#10;@when(parsers.parse('ingresa contraseña &quot;{password}&quot;'))&#10;def enter_password(selenium, base_url,password):&#10;    login_page = LoginPage(selenium, base_url)&#10;    login_page.enter_password(password)&#10;&#10;@when('hace clic en el botón de inicio sesión')&#10;def click_login(selenium, base_url):&#10;    login_page = LoginPage(selenium, base_url)&#10;    login_page.click_login_button()&#10;&#10;@then('debería ver la página principal')&#10;def verify_successful_login(selenium, base_url):&#10;    &quot;&quot;&quot; Verificar que el usuario vea la página principal despues del login&quot;&quot;&quot;&#10;&#10;    # Espera hasta 10 segundos a que se cumpla la condicion de redireccion&#10;    WebDriverWait(selenium, 10).until(&#10;        lambda driver: driver.current_url.endswith(&quot;/index.html&quot;)&#10;        or driver.current_url == f&quot;{base_url}/&quot;&#10;        or driver.current_url == base_url&#10;    )&#10;&#10;    login_page = LoginPage(selenium, base_url)&#10;&#10;    # Comprobar que el menu de usuario sea visible, si no lo es, lanzaremos un error &#10;    assert login_page.is_user_menu_visible(), &quot;User menu not visible after login&quot;&#10;&#10;@then('debería ver un mensaje de error')&#10;def verify_error_message(selenium, base_url):&#10;    &quot;&quot;&quot; Verificar que el usuario vea un mensaje de error &quot;&quot;&quot;&#10;    login_page = LoginPage(selenium, base_url)&#10;    &#10;    # Esperar a que aparezca el mensaje de error&#10;    WebDriverWait(selenium, 10).until(&#10;        lambda driver: login_page.is_error_message_visible()&#10;    )&#10;    &#10;    assert login_page.is_error_message_visible(), &quot;Error message not visible&quot;&#10;&#10;# Escenarios de prueba&#10;from pytest_bdd import scenarios&#10;&#10;scenarios('../features/login.feature')&#10;&#10;" />
              <option name="updatedContent" value="from pytest_bdd import given, when, then, parsers, scenarios&#10;from selenium.webdriver.support.wait import WebDriverWait&#10;from pages.login_page import LoginPage&#10;&#10;# Cargar los escenarios del archivo .feature&#10;scenarios('../features/login.feature')&#10;&#10;@given('el usuario está en la página de login')&#10;def navigate_to_login(selenium, base_url):&#10;    login_page = LoginPage(selenium, base_url)&#10;    login_page.open()&#10;&#10;@when(parsers.parse('ingresa usuario &quot;{username}&quot;'))&#10;def enter_username(selenium, base_url, username):&#10;    login_page = LoginPage(selenium, base_url)&#10;    login_page.enter_username(username)&#10;&#10;@when(parsers.parse('ingresa contraseña &quot;{password}&quot;'))&#10;def enter_password(selenium, base_url,password):&#10;    login_page = LoginPage(selenium, base_url)&#10;    login_page.enter_password(password)&#10;&#10;@when('hace clic en el botón de inicio sesión')&#10;def click_login(selenium, base_url):&#10;    login_page = LoginPage(selenium, base_url)&#10;    login_page.click_login_button()&#10;&#10;@then('debería ver la página principal')&#10;def verify_successful_login(selenium, base_url):&#10;    &quot;&quot;&quot; Verificar que el usuario vea la página principal despues del login&quot;&quot;&quot;&#10;&#10;    # Espera hasta 10 segundos a que se cumpla la condicion de redireccion&#10;    WebDriverWait(selenium, 10).until(&#10;        lambda driver: driver.current_url.endswith(&quot;/index.html&quot;)&#10;        or driver.current_url == f&quot;{base_url}/&quot;&#10;        or driver.current_url == base_url&#10;    )&#10;&#10;    login_page = LoginPage(selenium, base_url)&#10;&#10;    # Comprobar que el menu de usuario sea visible, si no lo es, lanzaremos un error &#10;    assert login_page.is_user_menu_visible(), &quot;User menu not visible after login&quot;&#10;&#10;@then('debería ver un mensaje de error')&#10;def verify_error_message(selenium, base_url):&#10;    &quot;&quot;&quot; Verificar que el usuario vea un mensaje de error &quot;&quot;&quot;&#10;    login_page = LoginPage(selenium, base_url)&#10;    &#10;    # Esperar a que aparezca el mensaje de error&#10;    WebDriverWait(selenium, 10).until(&#10;        lambda driver: login_page.is_error_message_visible()&#10;    )&#10;    &#10;    assert login_page.is_error_message_visible(), &quot;Error message not visible&quot;&#10;&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>